---
import Layout from "../layouts/Layout.astro";
import Dog from "../components/Dog.astro";
import { getDogs } from  "../utils/sanity";

const dogs = await getDogs();

function shuffleArray<T>(array: T[]): T[] {
  let currentIndex = array.length, randomIndex;

  // While there remain elements to shuffle...
  while (currentIndex !== 0) {
    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
  }

  return array;
}

const randomDogs = shuffleArray([...dogs]);
---
<Layout title="Dog Party">

  <section class="cards">
    {randomDogs.length ? randomDogs.map((dog) => (
      <Dog dog={dog} />
    )) : "Woof, no dogs found."}
  </section>

</Layout>

<style>
  .cards {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
  }
</style>